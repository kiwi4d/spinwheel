<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Lucky Spin KIWI4D - Mainkan putaran keberuntunganmu dan menangkan hadiah menarik!" />
  <meta name="keywords" content="Lucky Spin, KIWI4D, Spin Wheel, Hadiah, Tiket" />
  <title>Lucky Spin KIWI4D</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: Arial, sans-serif;
      background: url('https://i.imgur.com/2ZURh7T.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      overflow: hidden;
      position: relative;
    }

    /* Popup */
    #popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      color: #333;
      padding: 30px;
      width: 400px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      text-align: center;
      z-index: 10;
    }
    #popup h2 {
      margin-top: 0;
      font-size: 24px;
    }
    #popup p {
      font-size: 16px;
      line-height: 1.4;
    }
    #popup button {
      margin-top: 20px;
      background-color: #cba032;
      border: none;
      padding: 10px 25px;
      font-weight: bold;
      color: white;
      cursor: pointer;
      border-radius: 4px;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    #popup button:hover {
      background-color: #a87f27;
    }

    /* Form container (kanan atas) */
    .form-container {
      position: fixed;
      top: 70px;
      right: 50px;
      width: 300px;
      z-index: 5;
      text-align: center;
      max-height: 80vh;
      overflow-y: auto;
      background: rgba(0,0,0,0.5);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.7);
    }

    .form-container img {
      width: 180px;
      margin-bottom: 15px;
      user-select: none;
    }

    .form-container label {
      display: block;
      margin-bottom: 8px;
      font-weight: normal;
      font-size: 18px;
      color: white;
      text-align: left;
    }

    .form-container input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 12px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
    }

    .btn {
      width: 140px;
      padding: 10px 0;
      margin: 5px 8px;
      font-weight: bold;
      font-size: 14px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      color: white;
      display: inline-block;
      transition: background-color 0.3s ease, transform 0.2s ease;
      user-select: none;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .btn-gold {
      background-color: #b8860b;
    }
    .btn-gold:hover {
      background-color: #9c6f08;
    }

    .btn-blue {
      background-color: #0077b6;
    }
    .btn-blue:hover {
      background-color: #005f8f;
    }

    /* Background overlay for popup close */
    #popup-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.5);
      z-index: 9;
      display: block;
    }

    /* Spin wheel container */
    .wheel-container {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 350px;
      height: 350px;
      z-index: 5;
      user-select: none;
      pointer-events: none; /* Disable interaction while not spinning */
    }

    /* The wheel */
    #wheel {
      width: 350px;
      height: 350px;
      border-radius: 50%;
      border: 10px solid #b8860b;
      box-shadow: 0 0 20px #b8860b;
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
      background: conic-gradient(
        #f0c419 0deg 45deg,
        #d4a017 45deg 90deg,
        #f0c419 90deg 135deg,
        #d4a017 135deg 180deg,
        #f0c419 180deg 225deg,
        #d4a017 225deg 270deg,
        #f0c419 270deg 315deg,
        #d4a017 315deg 360deg
      );
      position: relative;
    }

    /* Segments text */
    .segment-text {
      position: absolute;
      width: 140px;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      color: #333;
      left: 50%;
      top: 50%;
      transform-origin: 0 140px;
      pointer-events: none;
      user-select: none;
    }

    /* Pointer */
    .pointer {
      position: fixed;
      left: 50%;
      top: calc(50% - 190px);
      transform: translateX(-50%);
      width: 0; 
      height: 0; 
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid #cba032;
      z-index: 6;
      user-select: none;
    }

    /* Spin button */
    #spinButton {
      position: fixed;
      left: 50%;
      top: calc(50% + 200px);
      transform: translateX(-50%);
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      background-color: #cba032;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      color: white;
      z-index: 6;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #spinButton:hover:not(:disabled) {
      background-color: #a87f27;
    }
    #spinButton:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }

    /* Result text */
    #result {
      position: fixed;
      left: 50%;
      top: calc(50% + 260px);
      transform: translateX(-50%);
      font-size: 22px;
      font-weight: bold;
      color: #cba032;
      text-shadow: 0 0 5px #000;
      min-height: 30px;
      z-index: 6;
      user-select: none;
    }

  </style>
</head>
<body>

  <!-- Background overlay for popup -->
  <div id="popup-overlay"></div>

  <!-- Popup -->
  <div id="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle" aria-describedby="popupDesc">
    <h2 id="popupTitle">Selamat Datang di Lucky Spin Wheels!!!</h2>
    <p id="popupDesc">
      Kami selaku pihak Lucky Spin Wheels terlebih dahulu mengucapkan selamat kepada setiap member yang memiliki tiket untuk berkesempatan memenangkan hadiah menarik yang ditawarkan di Lucky Spin Wheels Lucky Spin ini. Untuk kalian yang memiliki tiket silahkan masukkan ke kolom kode yang disediakan dan klik tombol spin untuk memulai peruntungan anda..!!!
    </p>
    <button id="closePopupBtn">Thank You</button>
  </div>

  <!-- Spin Wheel -->
  <div class="pointer"></div>
  <div class="wheel-container" aria-label="Lucky spin wheel">
    <div id="wheel" aria-live="polite" aria-atomic="true" role="img" aria-describedby="result"></div>
  </div>
  <button id="spinButton" aria-controls="result" aria-label="Putar roda keberuntungan">SPIN</button>
  <div id="result" role="alert" aria-live="assertive"></div>

  <!-- Form kanan atas -->
  <div class="form-container" role="region" aria-label="Form kode tiket dan tombol aksi">
    <img src="https://i.imgur.com/vcDzELV.png" alt="Logo KIWI4D" />
    <label for="username">Masukkan Kode Tiket:</label>
    <input type="text" id="username" name="username" placeholder="username" />
    <input type="text" id="voucher" name="voucher" placeholder="voucher" />

    <div>
      <button class="btn btn-gold" type="button">RIWAYAT</button>
      <button class="btn btn-gold" type="button">Syarat & Ketentuan</button>
    </div>
    <div>
      <button class="btn btn-blue" type="button">Whatsapp Admin</button>
      <button class="btn btn-blue" type="button">KEMBALI KE SITUS</button>
    </div>
  </div>

<script>
  // Close popup function
  const popup = document.getElementById('popup');
  const popupOverlay = document.getElementById('popup-overlay');
  const closePopupBtn = document.getElementById('closePopupBtn');

  function closePopup() {
    popup.style.display = 'none';
    popupOverlay.style.display = 'none';
  }

  closePopupBtn.addEventListener('click', closePopup);
  popupOverlay.addEventListener('click', closePopup);

  // Spin Wheel Logic
  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinButton');
  const result = document.getElementById('result');

  const prizes = [
    'Rp.5.000', 
    'Rp.10.000', 
    'Rp.20.000', 
    'Rp.25.000', 
    'Rp.50.000', 
    'Rp.100.000', 
    'Iphone 16 PROMAX', 
    'Motor NMAX'
  ];

  let spinning = false;

  spinBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value.trim();
    const voucher = document.getElementById('voucher').value.trim();

    if(!username || !voucher) {
      alert('Silakan isi username dan voucher terlebih dahulu!');
      return;
    }

    if (spinning) return; // cegah klik ganda
    spinning = true;
    spinBtn.disabled = true;
    result.textContent = '';

    // Random pilih hadiah 0-7
    const segmentCount = prizes.length;
    const randomIndex = Math.floor(Math.random() * segmentCount);

    // 360 derajat per putaran penuh, setiap segmen 45 derajat
    // Rotasi dipilih supaya berhenti di hadiah yang dipilih
    // Tambah putaran penuh (misalnya 5 putaran)
    const spins = 5;
    const degreesPerSegment = 360 / segmentCount;
    const stopDegree = 360 * spins + (segmentCount - randomIndex) * degreesPerSegment - degreesPerSegment/2;

    // Mulai animasi putar
    wheel.style.transition = 'transform 4s cubic-bezier(0.33, 1, 0.68, 1)';
    wheel.style.transform = `rotate(${stopDegree}deg)`;

    // Setelah animasi selesai, tampilkan hasil dan aktifkan tombol lagi
    setTimeout(() => {
      spinning = false;
      spinBtn.disabled = false;
      result.textContent = `ðŸŽ‰ Kamu mendapatkan: ${prizes[randomIndex]}!`;
    }, 4200); // sedikit lebih dari durasi animasi
  });
</script>

</body>
</html>
